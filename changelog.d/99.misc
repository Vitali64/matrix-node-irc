Add support for splitting out the IRC connection state, and connecting via an existing socket.